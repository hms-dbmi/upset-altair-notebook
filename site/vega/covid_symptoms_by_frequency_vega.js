let upsetaltair_sort_by_frequency_spec = { "$schema": "https://vega.github.io/schema/vega/v5.json", "background": "white", "padding": 5, "title": { "anchor": "start", "text": "Symptoms Reported by Users of the COVID Symptom Tracker App", "subtitle": [ "Story & Data: https://www.nature.com/articles/d41586-020-00154-w", "Altair-based UpSet Plot: https://github.com/hms-dbmi/upset-altair-notebook" ], "fontSize": 20, "fontWeight": 500, "subtitleColor": "#3A3A3A", "subtitleFontSize": 14 }, "data": [ {"name": "selector011_store"}, {"name": "selector010_store"}, { "name": "data-51a18922e537214846aa112d1ccd2e10", "values": [ { "intersection_id": 23, "count": 1, "degree": 2, "set": "Shortness of Breath", "is_intersect": 1 }, { "intersection_id": 21, "count": 5, "degree": 1, "set": "Shortness of Breath", "is_intersect": 1 }, { "intersection_id": 28, "count": 7, "degree": 4, "set": "Shortness of Breath", "is_intersect": 1 }, { "intersection_id": 14, "count": 7, "degree": 2, "set": "Shortness of Breath", "is_intersect": 0 }, { "intersection_id": 30, "count": 8, "degree": 5, "set": "Shortness of Breath", "is_intersect": 1 }, { "intersection_id": 22, "count": 10, "degree": 2, "set": "Shortness of Breath", "is_intersect": 1 }, { "intersection_id": 26, "count": 11, "degree": 4, "set": "Shortness of Breath", "is_intersect": 1 }, { "intersection_id": 6, "count": 11, "degree": 1, "set": "Shortness of Breath", "is_intersect": 0 }, { "intersection_id": 17, "count": 12, "degree": 3, "set": "Shortness of Breath", "is_intersect": 0 }, { "intersection_id": 11, "count": 12, "degree": 1, "set": "Shortness of Breath", "is_intersect": 0 }, { "intersection_id": 27, "count": 17, "degree": 5, "set": "Shortness of Breath", "is_intersect": 1 }, { "intersection_id": 18, "count": 17, "degree": 4, "set": "Shortness of Breath", "is_intersect": 0 }, { "intersection_id": 19, "count": 17, "degree": 4, "set": "Shortness of Breath", "is_intersect": 0 }, { "intersection_id": 29, "count": 18, "degree": 5, "set": "Shortness of Breath", "is_intersect": 1 }, { "intersection_id": 24, "count": 22, "degree": 3, "set": "Shortness of Breath", "is_intersect": 1 }, { "intersection_id": 31, "count": 23, "degree": 6, "set": "Shortness of Breath", "is_intersect": 1 }, { "intersection_id": 25, "count": 26, "degree": 4, "set": "Shortness of Breath", "is_intersect": 1 }, { "intersection_id": 7, "count": 28, "degree": 2, "set": "Shortness of Breath", "is_intersect": 0 }, { "intersection_id": 15, "count": 31, "degree": 3, "set": "Shortness of Breath", "is_intersect": 0 }, { "intersection_id": 16, "count": 41, "degree": 4, "set": "Shortness of Breath", "is_intersect": 0 }, { "intersection_id": 12, "count": 43, "degree": 2, "set": "Shortness of Breath", "is_intersect": 0 }, { "intersection_id": 8, "count": 46, "degree": 3, "set": "Shortness of Breath", "is_intersect": 0 }, { "intersection_id": 20, "count": 50, "degree": 5, "set": "Shortness of Breath", "is_intersect": 0 }, { "intersection_id": 9, "count": 54, "degree": 3, "set": "Shortness of Breath", "is_intersect": 0 }, { "intersection_id": 3, "count": 57, "degree": 1, "set": "Shortness of Breath", "is_intersect": 0 }, { "intersection_id": 13, "count": 64, "degree": 3, "set": "Shortness of Breath", "is_intersect": 0 }, { "intersection_id": 10, "count": 69, "degree": 4, "set": "Shortness of Breath", "is_intersect": 0 }, { "intersection_id": 1, "count": 140, "degree": 1, "set": "Shortness of Breath", "is_intersect": 0 }, { "intersection_id": 4, "count": 179, "degree": 2, "set": "Shortness of Breath", "is_intersect": 0 }, { "intersection_id": 0, "count": 198, "degree": 1, "set": "Shortness of Breath", "is_intersect": 0 }, { "intersection_id": 5, "count": 259, "degree": 3, "set": "Shortness of Breath", "is_intersect": 0 }, { "intersection_id": 2, "count": 281, "degree": 2, "set": "Shortness of Breath", "is_intersect": 0 }, { "intersection_id": 23, "count": 1, "degree": 2, "set": "Diarrhea", "is_intersect": 0 }, { "intersection_id": 21, "count": 5, "degree": 1, "set": "Diarrhea", "is_intersect": 0 }, { "intersection_id": 28, "count": 7, "degree": 4, "set": "Diarrhea", "is_intersect": 1 }, { "intersection_id": 14, "count": 7, "degree": 2, "set": "Diarrhea", "is_intersect": 1 }, { "intersection_id": 30, "count": 8, "degree": 5, "set": "Diarrhea", "is_intersect": 1 }, { "intersection_id": 22, "count": 10, "degree": 2, "set": "Diarrhea", "is_intersect": 0 }, { "intersection_id": 26, "count": 11, "degree": 4, "set": "Diarrhea", "is_intersect": 0 }, { "intersection_id": 6, "count": 11, "degree": 1, "set": "Diarrhea", "is_intersect": 0 }, { "intersection_id": 17, "count": 12, "degree": 3, "set": "Diarrhea", "is_intersect": 1 }, { "intersection_id": 11, "count": 12, "degree": 1, "set": "Diarrhea", "is_intersect": 1 }, { "intersection_id": 27, "count": 17, "degree": 5, "set": "Diarrhea", "is_intersect": 0 }, { "intersection_id": 18, "count": 17, "degree": 4, "set": "Diarrhea", "is_intersect": 1 }, { "intersection_id": 19, "count": 17, "degree": 4, "set": "Diarrhea", "is_intersect": 1 }, { "intersection_id": 29, "count": 18, "degree": 5, "set": "Diarrhea", "is_intersect": 1 }, { "intersection_id": 24, "count": 22, "degree": 3, "set": "Diarrhea", "is_intersect": 0 }, { "intersection_id": 31, "count": 23, "degree": 6, "set": "Diarrhea", "is_intersect": 1 }, { "intersection_id": 25, "count": 26, "degree": 4, "set": "Diarrhea", "is_intersect": 0 }, { "intersection_id": 7, "count": 28, "degree": 2, "set": "Diarrhea", "is_intersect": 0 }, { "intersection_id": 15, "count": 31, "degree": 3, "set": "Diarrhea", "is_intersect": 1 }, { "intersection_id": 16, "count": 41, "degree": 4, "set": "Diarrhea", "is_intersect": 1 }, { "intersection_id": 12, "count": 43, "degree": 2, "set": "Diarrhea", "is_intersect": 1 }, { "intersection_id": 8, "count": 46, "degree": 3, "set": "Diarrhea", "is_intersect": 0 }, { "intersection_id": 20, "count": 50, "degree": 5, "set": "Diarrhea", "is_intersect": 1 }, { "intersection_id": 9, "count": 54, "degree": 3, "set": "Diarrhea", "is_intersect": 0 }, { "intersection_id": 3, "count": 57, "degree": 1, "set": "Diarrhea", "is_intersect": 0 }, { "intersection_id": 13, "count": 64, "degree": 3, "set": "Diarrhea", "is_intersect": 1 }, { "intersection_id": 10, "count": 69, "degree": 4, "set": "Diarrhea", "is_intersect": 0 }, { "intersection_id": 1, "count": 140, "degree": 1, "set": "Diarrhea", "is_intersect": 0 }, { "intersection_id": 4, "count": 179, "degree": 2, "set": "Diarrhea", "is_intersect": 0 }, { "intersection_id": 0, "count": 198, "degree": 1, "set": "Diarrhea", "is_intersect": 0 }, { "intersection_id": 5, "count": 259, "degree": 3, "set": "Diarrhea", "is_intersect": 0 }, { "intersection_id": 2, "count": 281, "degree": 2, "set": "Diarrhea", "is_intersect": 0 }, { "intersection_id": 23, "count": 1, "degree": 2, "set": "Fever", "is_intersect": 0 }, { "intersection_id": 21, "count": 5, "degree": 1, "set": "Fever", "is_intersect": 0 }, { "intersection_id": 28, "count": 7, "degree": 4, "set": "Fever", "is_intersect": 0 }, { "intersection_id": 14, "count": 7, "degree": 2, "set": "Fever", "is_intersect": 0 }, { "intersection_id": 30, "count": 8, "degree": 5, "set": "Fever", "is_intersect": 1 }, { "intersection_id": 22, "count": 10, "degree": 2, "set": "Fever", "is_intersect": 0 }, { "intersection_id": 26, "count": 11, "degree": 4, "set": "Fever", "is_intersect": 1 }, { "intersection_id": 6, "count": 11, "degree": 1, "set": "Fever", "is_intersect": 1 }, { "intersection_id": 17, "count": 12, "degree": 3, "set": "Fever", "is_intersect": 1 }, { "intersection_id": 11, "count": 12, "degree": 1, "set": "Fever", "is_intersect": 0 }, { "intersection_id": 27, "count": 17, "degree": 5, "set": "Fever", "is_intersect": 1 }, { "intersection_id": 18, "count": 17, "degree": 4, "set": "Fever", "is_intersect": 1 }, { "intersection_id": 19, "count": 17, "degree": 4, "set": "Fever", "is_intersect": 1 }, { "intersection_id": 29, "count": 18, "degree": 5, "set": "Fever", "is_intersect": 0 }, { "intersection_id": 24, "count": 22, "degree": 3, "set": "Fever", "is_intersect": 0 }, { "intersection_id": 31, "count": 23, "degree": 6, "set": "Fever", "is_intersect": 1 }, { "intersection_id": 25, "count": 26, "degree": 4, "set": "Fever", "is_intersect": 0 }, { "intersection_id": 7, "count": 28, "degree": 2, "set": "Fever", "is_intersect": 1 }, { "intersection_id": 15, "count": 31, "degree": 3, "set": "Fever", "is_intersect": 0 }, { "intersection_id": 16, "count": 41, "degree": 4, "set": "Fever", "is_intersect": 0 }, { "intersection_id": 12, "count": 43, "degree": 2, "set": "Fever", "is_intersect": 0 }, { "intersection_id": 8, "count": 46, "degree": 3, "set": "Fever", "is_intersect": 1 }, { "intersection_id": 20, "count": 50, "degree": 5, "set": "Fever", "is_intersect": 1 }, { "intersection_id": 9, "count": 54, "degree": 3, "set": "Fever", "is_intersect": 1 }, { "intersection_id": 3, "count": 57, "degree": 1, "set": "Fever", "is_intersect": 0 }, { "intersection_id": 13, "count": 64, "degree": 3, "set": "Fever", "is_intersect": 0 }, { "intersection_id": 10, "count": 69, "degree": 4, "set": "Fever", "is_intersect": 1 }, { "intersection_id": 1, "count": 140, "degree": 1, "set": "Fever", "is_intersect": 0 }, { "intersection_id": 4, "count": 179, "degree": 2, "set": "Fever", "is_intersect": 0 }, { "intersection_id": 0, "count": 198, "degree": 1, "set": "Fever", "is_intersect": 0 }, { "intersection_id": 5, "count": 259, "degree": 3, "set": "Fever", "is_intersect": 0 }, { "intersection_id": 2, "count": 281, "degree": 2, "set": "Fever", "is_intersect": 0 }, { "intersection_id": 23, "count": 1, "degree": 2, "set": "Cough", "is_intersect": 1 }, { "intersection_id": 21, "count": 5, "degree": 1, "set": "Cough", "is_intersect": 0 }, { "intersection_id": 28, "count": 7, "degree": 4, "set": "Cough", "is_intersect": 1 }, { "intersection_id": 14, "count": 7, "degree": 2, "set": "Cough", "is_intersect": 1 }, { "intersection_id": 30, "count": 8, "degree": 5, "set": "Cough", "is_intersect": 1 }, { "intersection_id": 22, "count": 10, "degree": 2, "set": "Cough", "is_intersect": 0 }, { "intersection_id": 26, "count": 11, "degree": 4, "set": "Cough", "is_intersect": 1 }, { "intersection_id": 6, "count": 11, "degree": 1, "set": "Cough", "is_intersect": 0 }, { "intersection_id": 17, "count": 12, "degree": 3, "set": "Cough", "is_intersect": 0 }, { "intersection_id": 11, "count": 12, "degree": 1, "set": "Cough", "is_intersect": 0 }, { "intersection_id": 27, "count": 17, "degree": 5, "set": "Cough", "is_intersect": 1 }, { "intersection_id": 18, "count": 17, "degree": 4, "set": "Cough", "is_intersect": 0 }, { "intersection_id": 19, "count": 17, "degree": 4, "set": "Cough", "is_intersect": 1 }, { "intersection_id": 29, "count": 18, "degree": 5, "set": "Cough", "is_intersect": 1 }, { "intersection_id": 24, "count": 22, "degree": 3, "set": "Cough", "is_intersect": 1 }, { "intersection_id": 31, "count": 23, "degree": 6, "set": "Cough", "is_intersect": 1 }, { "intersection_id": 25, "count": 26, "degree": 4, "set": "Cough", "is_intersect": 1 }, { "intersection_id": 7, "count": 28, "degree": 2, "set": "Cough", "is_intersect": 0 }, { "intersection_id": 15, "count": 31, "degree": 3, "set": "Cough", "is_intersect": 1 }, { "intersection_id": 16, "count": 41, "degree": 4, "set": "Cough", "is_intersect": 1 }, { "intersection_id": 12, "count": 43, "degree": 2, "set": "Cough", "is_intersect": 0 }, { "intersection_id": 8, "count": 46, "degree": 3, "set": "Cough", "is_intersect": 0 }, { "intersection_id": 20, "count": 50, "degree": 5, "set": "Cough", "is_intersect": 1 }, { "intersection_id": 9, "count": 54, "degree": 3, "set": "Cough", "is_intersect": 1 }, { "intersection_id": 3, "count": 57, "degree": 1, "set": "Cough", "is_intersect": 1 }, { "intersection_id": 13, "count": 64, "degree": 3, "set": "Cough", "is_intersect": 0 }, { "intersection_id": 10, "count": 69, "degree": 4, "set": "Cough", "is_intersect": 1 }, { "intersection_id": 1, "count": 140, "degree": 1, "set": "Cough", "is_intersect": 0 }, { "intersection_id": 4, "count": 179, "degree": 2, "set": "Cough", "is_intersect": 1 }, { "intersection_id": 0, "count": 198, "degree": 1, "set": "Cough", "is_intersect": 0 }, { "intersection_id": 5, "count": 259, "degree": 3, "set": "Cough", "is_intersect": 1 }, { "intersection_id": 2, "count": 281, "degree": 2, "set": "Cough", "is_intersect": 0 }, { "intersection_id": 23, "count": 1, "degree": 2, "set": "Anosmia", "is_intersect": 0 }, { "intersection_id": 21, "count": 5, "degree": 1, "set": "Anosmia", "is_intersect": 0 }, { "intersection_id": 28, "count": 7, "degree": 4, "set": "Anosmia", "is_intersect": 0 }, { "intersection_id": 14, "count": 7, "degree": 2, "set": "Anosmia", "is_intersect": 0 }, { "intersection_id": 30, "count": 8, "degree": 5, "set": "Anosmia", "is_intersect": 0 }, { "intersection_id": 22, "count": 10, "degree": 2, "set": "Anosmia", "is_intersect": 0 }, { "intersection_id": 26, "count": 11, "degree": 4, "set": "Anosmia", "is_intersect": 0 }, { "intersection_id": 6, "count": 11, "degree": 1, "set": "Anosmia", "is_intersect": 0 }, { "intersection_id": 17, "count": 12, "degree": 3, "set": "Anosmia", "is_intersect": 0 }, { "intersection_id": 11, "count": 12, "degree": 1, "set": "Anosmia", "is_intersect": 0 }, { "intersection_id": 27, "count": 17, "degree": 5, "set": "Anosmia", "is_intersect": 1 }, { "intersection_id": 18, "count": 17, "degree": 4, "set": "Anosmia", "is_intersect": 1 }, { "intersection_id": 19, "count": 17, "degree": 4, "set": "Anosmia", "is_intersect": 0 }, { "intersection_id": 29, "count": 18, "degree": 5, "set": "Anosmia", "is_intersect": 1 }, { "intersection_id": 24, "count": 22, "degree": 3, "set": "Anosmia", "is_intersect": 0 }, { "intersection_id": 31, "count": 23, "degree": 6, "set": "Anosmia", "is_intersect": 1 }, { "intersection_id": 25, "count": 26, "degree": 4, "set": "Anosmia", "is_intersect": 1 }, { "intersection_id": 7, "count": 28, "degree": 2, "set": "Anosmia", "is_intersect": 0 }, { "intersection_id": 15, "count": 31, "degree": 3, "set": "Anosmia", "is_intersect": 0 }, { "intersection_id": 16, "count": 41, "degree": 4, "set": "Anosmia", "is_intersect": 1 }, { "intersection_id": 12, "count": 43, "degree": 2, "set": "Anosmia", "is_intersect": 0 }, { "intersection_id": 8, "count": 46, "degree": 3, "set": "Anosmia", "is_intersect": 1 }, { "intersection_id": 20, "count": 50, "degree": 5, "set": "Anosmia", "is_intersect": 1 }, { "intersection_id": 9, "count": 54, "degree": 3, "set": "Anosmia", "is_intersect": 0 }, { "intersection_id": 3, "count": 57, "degree": 1, "set": "Anosmia", "is_intersect": 0 }, { "intersection_id": 13, "count": 64, "degree": 3, "set": "Anosmia", "is_intersect": 1 }, { "intersection_id": 10, "count": 69, "degree": 4, "set": "Anosmia", "is_intersect": 1 }, { "intersection_id": 1, "count": 140, "degree": 1, "set": "Anosmia", "is_intersect": 1 }, { "intersection_id": 4, "count": 179, "degree": 2, "set": "Anosmia", "is_intersect": 0 }, { "intersection_id": 0, "count": 198, "degree": 1, "set": "Anosmia", "is_intersect": 0 }, { "intersection_id": 5, "count": 259, "degree": 3, "set": "Anosmia", "is_intersect": 1 }, { "intersection_id": 2, "count": 281, "degree": 2, "set": "Anosmia", "is_intersect": 1 }, { "intersection_id": 23, "count": 1, "degree": 2, "set": "Fatigue", "is_intersect": 0 }, { "intersection_id": 21, "count": 5, "degree": 1, "set": "Fatigue", "is_intersect": 0 }, { "intersection_id": 28, "count": 7, "degree": 4, "set": "Fatigue", "is_intersect": 1 }, { "intersection_id": 14, "count": 7, "degree": 2, "set": "Fatigue", "is_intersect": 0 }, { "intersection_id": 30, "count": 8, "degree": 5, "set": "Fatigue", "is_intersect": 1 }, { "intersection_id": 22, "count": 10, "degree": 2, "set": "Fatigue", "is_intersect": 1 }, { "intersection_id": 26, "count": 11, "degree": 4, "set": "Fatigue", "is_intersect": 1 }, { "intersection_id": 6, "count": 11, "degree": 1, "set": "Fatigue", "is_intersect": 0 }, { "intersection_id": 17, "count": 12, "degree": 3, "set": "Fatigue", "is_intersect": 1 }, { "intersection_id": 11, "count": 12, "degree": 1, "set": "Fatigue", "is_intersect": 0 }, { "intersection_id": 27, "count": 17, "degree": 5, "set": "Fatigue", "is_intersect": 1 }, { "intersection_id": 18, "count": 17, "degree": 4, "set": "Fatigue", "is_intersect": 1 }, { "intersection_id": 19, "count": 17, "degree": 4, "set": "Fatigue", "is_intersect": 1 }, { "intersection_id": 29, "count": 18, "degree": 5, "set": "Fatigue", "is_intersect": 1 }, { "intersection_id": 24, "count": 22, "degree": 3, "set": "Fatigue", "is_intersect": 1 }, { "intersection_id": 31, "count": 23, "degree": 6, "set": "Fatigue", "is_intersect": 1 }, { "intersection_id": 25, "count": 26, "degree": 4, "set": "Fatigue", "is_intersect": 1 }, { "intersection_id": 7, "count": 28, "degree": 2, "set": "Fatigue", "is_intersect": 1 }, { "intersection_id": 15, "count": 31, "degree": 3, "set": "Fatigue", "is_intersect": 1 }, { "intersection_id": 16, "count": 41, "degree": 4, "set": "Fatigue", "is_intersect": 1 }, { "intersection_id": 12, "count": 43, "degree": 2, "set": "Fatigue", "is_intersect": 1 }, { "intersection_id": 8, "count": 46, "degree": 3, "set": "Fatigue", "is_intersect": 1 }, { "intersection_id": 20, "count": 50, "degree": 5, "set": "Fatigue", "is_intersect": 1 }, { "intersection_id": 9, "count": 54, "degree": 3, "set": "Fatigue", "is_intersect": 1 }, { "intersection_id": 3, "count": 57, "degree": 1, "set": "Fatigue", "is_intersect": 0 }, { "intersection_id": 13, "count": 64, "degree": 3, "set": "Fatigue", "is_intersect": 1 }, { "intersection_id": 10, "count": 69, "degree": 4, "set": "Fatigue", "is_intersect": 1 }, { "intersection_id": 1, "count": 140, "degree": 1, "set": "Fatigue", "is_intersect": 0 }, { "intersection_id": 4, "count": 179, "degree": 2, "set": "Fatigue", "is_intersect": 1 }, { "intersection_id": 0, "count": 198, "degree": 1, "set": "Fatigue", "is_intersect": 1 }, { "intersection_id": 5, "count": 259, "degree": 3, "set": "Fatigue", "is_intersect": 1 }, { "intersection_id": 2, "count": 281, "degree": 2, "set": "Fatigue", "is_intersect": 1 } ] }, { "name": "data-edc52b94e708b8ac518e05227a1d24db", "values": [ {"set": "Shortness of Breath", "set_abbre": "B"}, {"set": "Diarrhea", "set_abbre": "D"}, {"set": "Fever", "set_abbre": "Fe"}, {"set": "Cough", "set_abbre": "C"}, {"set": "Anosmia", "set_abbre": "A"}, {"set": "Fatigue", "set_abbre": "Fa"} ] }, { "name": "data-845b010f0be9092a4e24abf6f511af02", "values": [ {"set": "Shortness of Breath", "set_order": 1}, {"set": "Diarrhea", "set_order": 2}, {"set": "Fever", "set_order": 3}, {"set": "Cough", "set_order": 4}, {"set": "Anosmia", "set_order": 5}, {"set": "Fatigue", "set_order": 6} ] }, { "name": "data_0", "source": "data-51a18922e537214846aa112d1ccd2e10", "transform": [ { "type": "filter", "expr": "!(length(data(\"selector010_store\"))) || (vlSelectionTest(\"selector010_store\", datum))" }, { "type": "pivot", "field": "set", "value": "is_intersect", "op": "max", "groupby": ["intersection_id", "count"] }, { "type": "aggregate", "groupby": [ "Shortness of Breath", "Diarrhea", "Fever", "Cough", "Anosmia", "Fatigue" ], "ops": ["sum"], "fields": ["count"], "as": ["count"] }, { "type": "formula", "expr": "(isDefined(datum['Shortness of Breath']) ? datum['Shortness of Breath'] : 0)+(isDefined(datum['Diarrhea']) ? datum['Diarrhea'] : 0)+(isDefined(datum['Fever']) ? datum['Fever'] : 0)+(isDefined(datum['Cough']) ? datum['Cough'] : 0)+(isDefined(datum['Anosmia']) ? datum['Anosmia'] : 0)+(isDefined(datum['Fatigue']) ? datum['Fatigue'] : 0)", "as": "degree" }, {"type": "filter", "expr": "(datum['degree'] !== 0)"}, { "type": "window", "params": [null], "as": ["intersection_id"], "ops": ["row_number"], "fields": [""], "sort": {"field": [], "order": []}, "frame": [null, null] }, { "type": "fold", "fields": [ "Shortness of Breath", "Diarrhea", "Fever", "Cough", "Anosmia", "Fatigue" ], "as": ["set", "is_intersect"] } ] }, { "name": "data_1", "source": "data_0", "transform": [ { "type": "lookup", "from": "data-edc52b94e708b8ac518e05227a1d24db", "key": "set", "fields": ["set"], "values": ["set_abbre"] }, { "type": "lookup", "from": "data-845b010f0be9092a4e24abf6f511af02", "key": "set", "fields": ["set"], "values": ["set_order"] }, { "type": "filter", "expr": "!(length(data(\"selector010_store\"))) || (vlSelectionTest(\"selector010_store\", datum))" }, { "type": "window", "params": [null], "as": ["set_order"], "ops": ["distinct"], "fields": ["set"], "sort": {"field": ["set_order"], "order": ["ascending"]}, "frame": [null, 0] } ] }, { "name": "data_2", "source": "data_1", "transform": [ { "type": "aggregate", "groupby": ["degree", "intersection_id"], "ops": ["max"], "fields": ["count"], "as": ["max_count"] }, { "type": "filter", "expr": "isValid(datum[\"max_count\"]) && isFinite(+datum[\"max_count\"])" } ] }, { "name": "data_3", "source": "data_0", "transform": [ { "type": "lookup", "from": "data-edc52b94e708b8ac518e05227a1d24db", "key": "set", "fields": ["set"], "values": ["set_abbre"] }, { "type": "lookup", "from": "data-845b010f0be9092a4e24abf6f511af02", "key": "set", "fields": ["set"], "values": ["set_order"] }, { "type": "filter", "expr": "!(length(data(\"selector010_store\"))) || (vlSelectionTest(\"selector010_store\", datum))" }, { "type": "window", "params": [null], "as": ["set_order"], "ops": ["distinct"], "fields": ["set"], "sort": {"field": ["set_order"], "order": ["ascending"]}, "frame": [null, 0] } ] }, { "name": "data_4", "source": "data_3", "transform": [ { "type": "aggregate", "groupby": ["count", "degree", "intersection_id"], "ops": ["max"], "fields": ["count"], "as": ["max_count"] }, { "type": "filter", "expr": "isValid(datum[\"max_count\"]) && isFinite(+datum[\"max_count\"])" } ] }, { "name": "data_5", "source": "data_0", "transform": [ { "type": "lookup", "from": "data-edc52b94e708b8ac518e05227a1d24db", "key": "set", "fields": ["set"], "values": ["set_abbre"] }, { "type": "lookup", "from": "data-845b010f0be9092a4e24abf6f511af02", "key": "set", "fields": ["set"], "values": ["set_order"] }, { "type": "filter", "expr": "!(length(data(\"selector010_store\"))) || (vlSelectionTest(\"selector010_store\", datum))" }, { "type": "window", "params": [null], "as": ["set_order"], "ops": ["distinct"], "fields": ["set"], "sort": {"field": ["set_order"], "order": ["ascending"]}, "frame": [null, 0] }, {"type": "filter", "expr": "(datum['is_intersect'] === 1)"} ] }, { "name": "data_6", "source": "data_5", "transform": [ { "type": "aggregate", "groupby": ["degree", "intersection_id", "set_order"], "ops": ["max"], "fields": ["count"], "as": ["max_count"] } ] }, { "name": "data_7", "source": "data_0", "transform": [ { "type": "lookup", "from": "data-edc52b94e708b8ac518e05227a1d24db", "key": "set", "fields": ["set"], "values": ["set_abbre"] }, { "type": "lookup", "from": "data-845b010f0be9092a4e24abf6f511af02", "key": "set", "fields": ["set"], "values": ["set_order"] }, { "type": "filter", "expr": "!(length(data(\"selector010_store\"))) || (vlSelectionTest(\"selector010_store\", datum))" }, { "type": "window", "params": [null], "as": ["set_order"], "ops": ["distinct"], "fields": ["set"], "sort": {"field": ["set_order"], "order": ["ascending"]}, "frame": [null, 0] }, {"type": "filter", "expr": "((datum['set_order'] % 2) === 1)"} ] }, { "name": "data_8", "source": "data_7", "transform": [ { "type": "aggregate", "groupby": ["degree", "intersection_id", "set_order"], "ops": ["max"], "fields": ["count"], "as": ["max_count"] } ] }, { "name": "data_9", "source": "data_0", "transform": [ { "type": "lookup", "from": "data-edc52b94e708b8ac518e05227a1d24db", "key": "set", "fields": ["set"], "values": ["set_abbre"] }, { "type": "lookup", "from": "data-845b010f0be9092a4e24abf6f511af02", "key": "set", "fields": ["set"], "values": ["set_order"] }, { "type": "filter", "expr": "!(length(data(\"selector010_store\"))) || (vlSelectionTest(\"selector010_store\", datum))" }, { "type": "window", "params": [null], "as": ["set_order"], "ops": ["distinct"], "fields": ["set"], "sort": {"field": ["set_order"], "order": ["ascending"]}, "frame": [null, 0] } ] }, { "name": "data_10", "source": "data_9", "transform": [ { "type": "aggregate", "groupby": ["degree", "intersection_id", "set_order"], "ops": ["max"], "fields": ["count"], "as": ["max_count"] } ] }, { "name": "data_11", "source": "data_0", "transform": [ { "type": "lookup", "from": "data-edc52b94e708b8ac518e05227a1d24db", "key": "set", "fields": ["set"], "values": ["set_abbre"] }, { "type": "lookup", "from": "data-845b010f0be9092a4e24abf6f511af02", "key": "set", "fields": ["set"], "values": ["set_order"] }, { "type": "filter", "expr": "!(length(data(\"selector010_store\"))) || (vlSelectionTest(\"selector010_store\", datum))" }, { "type": "window", "params": [null], "as": ["set_order"], "ops": ["distinct"], "fields": ["set"], "sort": {"field": ["set_order"], "order": ["ascending"]}, "frame": [null, 0] }, {"type": "filter", "expr": "(datum['is_intersect'] === 1)"} ] }, { "name": "data_12", "source": "data_11", "transform": [ { "type": "aggregate", "groupby": ["degree", "intersection_id"], "ops": ["max", "min", "max"], "fields": ["count", "set_order", "set_order"], "as": ["max_count", "min_set_order", "max_set_order"] } ] }, { "name": "data_13", "source": "data_0", "transform": [ { "type": "lookup", "from": "data-edc52b94e708b8ac518e05227a1d24db", "key": "set", "fields": ["set"], "values": ["set_abbre"] }, { "type": "lookup", "from": "data-845b010f0be9092a4e24abf6f511af02", "key": "set", "fields": ["set"], "values": ["set_order"] }, { "type": "filter", "expr": "!(length(data(\"selector010_store\"))) || (vlSelectionTest(\"selector010_store\", datum))" }, { "type": "window", "params": [null], "as": ["set_order"], "ops": ["distinct"], "fields": ["set"], "sort": {"field": ["set_order"], "order": ["ascending"]}, "frame": [null, 0] }, {"type": "filter", "expr": "(datum['is_intersect'] === 1)"} ] }, { "name": "data_14", "source": "data_13", "transform": [ { "type": "aggregate", "groupby": ["degree", "intersection_id", "set_order"], "ops": ["max"], "fields": ["count"], "as": ["max_count"] } ] }, { "name": "data_15", "source": "data_0", "transform": [ { "type": "lookup", "from": "data-edc52b94e708b8ac518e05227a1d24db", "key": "set", "fields": ["set"], "values": ["set_abbre"] }, { "type": "lookup", "from": "data-845b010f0be9092a4e24abf6f511af02", "key": "set", "fields": ["set"], "values": ["set_order"] }, { "type": "filter", "expr": "!(length(data(\"selector010_store\"))) || (vlSelectionTest(\"selector010_store\", datum))" }, { "type": "window", "params": [null], "as": ["set_order"], "ops": ["distinct"], "fields": ["set"], "sort": {"field": ["set_order"], "order": ["ascending"]}, "frame": [null, 0] } ] }, { "name": "data_16", "source": "data_0", "transform": [ { "type": "lookup", "from": "data-edc52b94e708b8ac518e05227a1d24db", "key": "set", "fields": ["set"], "values": ["set_abbre"] }, { "type": "lookup", "from": "data-845b010f0be9092a4e24abf6f511af02", "key": "set", "fields": ["set"], "values": ["set_order"] }, { "type": "filter", "expr": "!(length(data(\"selector010_store\"))) || (vlSelectionTest(\"selector010_store\", datum))" }, { "type": "window", "params": [null], "as": ["set_order"], "ops": ["distinct"], "fields": ["set"], "sort": {"field": ["set_order"], "order": ["ascending"]}, "frame": [null, 0] } ] }, { "name": "data_17", "source": "data_0", "transform": [ { "type": "lookup", "from": "data-edc52b94e708b8ac518e05227a1d24db", "key": "set", "fields": ["set"], "values": ["set_abbre"] }, { "type": "lookup", "from": "data-845b010f0be9092a4e24abf6f511af02", "key": "set", "fields": ["set"], "values": ["set_order"] }, { "type": "filter", "expr": "!(length(data(\"selector010_store\"))) || (vlSelectionTest(\"selector010_store\", datum))" }, { "type": "window", "params": [null], "as": ["set_order"], "ops": ["distinct"], "fields": ["set"], "sort": {"field": ["set_order"], "order": ["ascending"]}, "frame": [null, 0] }, {"type": "filter", "expr": "(datum['is_intersect'] === 1)"}, { "type": "aggregate", "groupby": ["set", "set_order"], "ops": ["sum"], "fields": ["count"], "as": ["sum_count"] }, { "type": "stack", "groupby": ["set_order"], "field": "sum_count", "sort": {"field": ["set"], "order": ["descending"]}, "as": ["sum_count_start", "sum_count_end"], "offset": "zero" }, { "type": "filter", "expr": "isValid(datum[\"sum_count\"]) && isFinite(+datum[\"sum_count\"])" } ] } ], "signals": [ {"name": "concat_0_width", "value": 700}, {"name": "concat_0_height", "value": 325}, {"name": "concat_1_childHeight", "value": 175}, {"name": "concat_1_concat_0_width", "value": 700}, {"name": "concat_1_concat_1_width", "value": 20}, {"name": "concat_1_concat_2_width", "value": 200}, { "name": "selector010_set_legend", "value": null, "on": [ { "events": [ { "source": "view", "type": "click", "markname": "set_legend_symbols" }, { "source": "view", "type": "click", "markname": "set_legend_labels" }, { "source": "view", "type": "click", "markname": "set_legend_entries" } ], "update": "datum.value || item().items[0].items[0].datum.value", "force": true }, { "events": [{"source": "view", "type": "click"}], "update": "!event.item || !datum ? null : selector010_set_legend", "force": true } ] }, { "name": "unit", "value": {}, "on": [ {"events": "mousemove", "update": "isTuple(group()) ? group() : unit"} ] }, { "name": "selector011", "update": "vlSelectionResolve(\"selector011_store\", \"union\")" }, { "name": "selector010", "update": "vlSelectionResolve(\"selector010_store\", \"union\", true)" } ], "layout": {"padding": 20, "columns": 1, "bounds": "full", "align": "each"}, "marks": [ { "type": "group", "name": "concat_0_group", "style": "cell", "encode": { "update": { "width": {"signal": "concat_0_width"}, "height": {"signal": "concat_0_height"} } }, "signals": [ { "name": "selector011_tuple", "on": [ { "events": [{"source": "scope", "type": "mouseover"}], "update": "datum && item().mark.marktype !== 'group' ? {unit: \"concat_0_layer_0\", fields: selector011_tuple_fields, values: [(item().isVoronoi ? datum.datum : datum)[\"intersection_id\"]]} : null", "force": true }, { "events": [{"source": "scope", "type": "dblclick"}], "update": "null" } ] }, { "name": "selector011_tuple_fields", "value": [{"type": "E", "field": "intersection_id"}] }, { "name": "selector011_modify", "on": [ { "events": {"signal": "selector011_tuple"}, "update": "modify(\"selector011_store\", selector011_tuple, true)" } ] }, {"name": "selector010_tuple"}, { "name": "selector010_tuple_fields", "value": [{"type": "E", "field": "set"}] }, { "name": "selector010_toggle", "value": false, "on": [ { "events": {"merge": [{"source": "view", "type": "click"}]}, "update": "event.shiftKey" } ] }, { "name": "selector010_modify", "on": [ { "events": {"signal": "selector010_tuple"}, "update": "modify(\"selector010_store\", selector010_toggle ? null : selector010_tuple, selector010_toggle ? null : true, selector010_toggle ? selector010_tuple : null)" } ] } ], "marks": [ { "name": "concat_0_layer_0_marks", "type": "rect", "style": ["bar"], "interactive": true, "from": {"data": "data_2"}, "encode": { "update": { "fill": [ { "test": "!(length(data(\"selector011_store\"))) || (!(vlSelectionTest(\"selector011_store\", datum)))", "value": "#3A3A3A" }, {"value": "#777"} ], "tooltip": { "signal": "{\"Cardinality\": format(datum[\"max_count\"], \"\"), \"Degree\": format(datum[\"degree\"], \"\")}" }, "xc": { "scale": "concat_0_x", "field": "intersection_id", "band": 0.5 }, "width": {"value": 14.125}, "y": {"scale": "concat_0_y", "field": "max_count"}, "y2": {"scale": "concat_0_y", "value": 0} } } }, { "name": "concat_0_layer_1_marks", "type": "text", "style": ["text"], "interactive": false, "from": {"data": "data_4"}, "encode": { "update": { "dy": {"value": -10}, "fill": [ { "test": "!(length(data(\"selector011_store\"))) || (!(vlSelectionTest(\"selector011_store\", datum)))", "value": "#3A3A3A" }, {"value": "#777"} ], "tooltip": { "signal": "{\"Cardinality\": format(datum[\"max_count\"], \"\"), \"Degree\": format(datum[\"degree\"], \"\")}" }, "x": { "scale": "concat_0_x", "field": "intersection_id", "band": 0.5 }, "y": {"scale": "concat_0_y", "field": "max_count"}, "text": {"signal": "format(datum[\"count\"], \".0f\")"}, "fontSize": {"value": 12}, "align": {"value": "center"}, "baseline": {"value": "middle"} } } } ], "axes": [ { "scale": "concat_0_x", "orient": "bottom", "grid": false, "domain": true, "labels": false, "ticks": false, "labelAlign": "right", "labelAngle": 270, "labelBaseline": "middle", "zindex": 0 }, { "scale": "concat_0_y", "orient": "right", "grid": false, "title": "Intersection Size", "tickCount": 3, "labelOverlap": true, "zindex": 0 } ] }, { "type": "group", "name": "concat_1_group", "layout": {"padding": 5, "bounds": "full", "align": "each"}, "marks": [ { "type": "group", "name": "concat_1_concat_0_group", "style": "cell", "encode": { "update": { "width": {"signal": "concat_1_concat_0_width"}, "height": {"signal": "concat_1_childHeight"} } }, "signals": [ { "name": "selector011_tuple", "on": [ { "events": [{"source": "scope", "type": "mouseover"}], "update": "datum && item().mark.marktype !== 'group' ? {unit: \"concat_1_concat_0_layer_0\", fields: selector011_tuple_fields, values: [(item().isVoronoi ? datum.datum : datum)[\"intersection_id\"]]} : null", "force": true }, { "events": [{"source": "scope", "type": "dblclick"}], "update": "null" } ] }, { "name": "selector011_tuple_fields", "value": [{"type": "E", "field": "intersection_id"}] }, { "name": "selector011_modify", "on": [ { "events": {"signal": "selector011_tuple"}, "update": "modify(\"selector011_store\", selector011_tuple, true)" } ] }, {"name": "selector010_tuple"}, { "name": "selector010_tuple_fields", "value": [{"type": "E", "field": "set"}] }, { "name": "selector010_toggle", "value": false, "on": [ { "events": {"merge": [{"source": "view", "type": "click"}]}, "update": "event.shiftKey" } ] }, { "name": "selector010_modify", "on": [ { "events": {"signal": "selector010_tuple"}, "update": "modify(\"selector010_store\", selector010_toggle ? null : selector010_tuple, selector010_toggle ? null : true, selector010_toggle ? selector010_tuple : null)" } ] } ], "marks": [ { "name": "concat_1_concat_0_layer_0_marks", "type": "symbol", "style": ["circle"], "interactive": true, "from": {"data": "data_6"}, "encode": { "update": { "opacity": {"value": 1}, "size": {"value": 100}, "fill": [ { "test": "!(length(data(\"selector011_store\"))) || (!(vlSelectionTest(\"selector011_store\", datum)))", "value": "#3A3A3A" }, {"value": "#777"} ], "tooltip": { "signal": "{\"Cardinality\": format(datum[\"max_count\"], \"\"), \"Degree\": format(datum[\"degree\"], \"\")}" }, "x": { "scale": "concat_1_concat_0_x", "field": "intersection_id", "band": 0.5 }, "y": { "scale": "concat_1_y", "field": "set_order", "band": 0.5 }, "shape": {"value": "circle"} } } }, { "name": "concat_1_concat_0_layer_1_marks", "type": "rect", "style": ["rect"], "interactive": false, "from": {"data": "data_8"}, "encode": { "update": { "fill": {"value": "#F7F7F7"}, "tooltip": { "signal": "{\"Cardinality\": format(datum[\"max_count\"], \"\"), \"Degree\": format(datum[\"degree\"], \"\")}" }, "x": { "scale": "concat_1_concat_0_x", "field": "intersection_id" }, "width": {"scale": "concat_1_concat_0_x", "band": true}, "y": {"scale": "concat_1_y", "field": "set_order"}, "height": {"scale": "concat_1_y", "band": true} } } }, { "name": "concat_1_concat_0_layer_2_marks", "type": "symbol", "style": ["circle"], "interactive": false, "from": {"data": "data_10"}, "encode": { "update": { "opacity": {"value": 1}, "size": {"value": 100}, "fill": {"value": "#E6E6E6"}, "tooltip": { "signal": "{\"Cardinality\": format(datum[\"max_count\"], \"\"), \"Degree\": format(datum[\"degree\"], \"\")}" }, "x": { "scale": "concat_1_concat_0_x", "field": "intersection_id", "band": 0.5 }, "y": { "scale": "concat_1_y", "field": "set_order", "band": 0.5 }, "shape": {"value": "circle"} } } }, { "name": "concat_1_concat_0_layer_3_marks", "type": "rect", "style": ["bar"], "interactive": false, "from": {"data": "data_12"}, "encode": { "update": { "fill": [ { "test": "!(length(data(\"selector011_store\"))) || (!(vlSelectionTest(\"selector011_store\", datum)))", "value": "#3A3A3A" }, {"value": "#777"} ], "tooltip": { "signal": "{\"Cardinality\": format(datum[\"max_count\"], \"\"), \"Degree\": format(datum[\"degree\"], \"\")}" }, "xc": { "scale": "concat_1_concat_0_x", "field": "intersection_id", "band": 0.5 }, "width": {"value": 1}, "y": { "scale": "concat_1_y", "field": "min_set_order", "band": 0.5 }, "y2": { "scale": "concat_1_y", "field": "max_set_order", "band": 0.5 } } } }, { "name": "concat_1_concat_0_layer_4_marks", "type": "symbol", "style": ["circle"], "interactive": false, "from": {"data": "data_14"}, "encode": { "update": { "opacity": {"value": 1}, "size": {"value": 100}, "fill": [ { "test": "!(length(data(\"selector011_store\"))) || (!(vlSelectionTest(\"selector011_store\", datum)))", "value": "#3A3A3A" }, {"value": "#777"} ], "tooltip": { "signal": "{\"Cardinality\": format(datum[\"max_count\"], \"\"), \"Degree\": format(datum[\"degree\"], \"\")}" }, "x": { "scale": "concat_1_concat_0_x", "field": "intersection_id", "band": 0.5 }, "y": { "scale": "concat_1_y", "field": "set_order", "band": 0.5 }, "shape": {"value": "circle"} } } } ], "axes": [ { "scale": "concat_1_concat_0_x", "orient": "bottom", "grid": false, "domain": false, "labels": false, "ticks": false, "labelAlign": "right", "labelAngle": 270, "labelBaseline": "middle", "zindex": 0 }, { "scale": "concat_1_y", "orient": "left", "grid": false, "domain": false, "labels": false, "ticks": false, "zindex": 0 } ] }, { "type": "group", "name": "concat_1_concat_1_group", "style": "cell", "encode": { "update": { "width": {"signal": "concat_1_concat_1_width"}, "height": {"signal": "concat_1_childHeight"} } }, "signals": [ {"name": "width", "update": "concat_1_concat_1_width"}, { "name": "selector010_tuple", "update": "selector010_set_legend !== null ? {fields: selector010_tuple_fields, values: [selector010_set_legend]} : null" }, { "name": "selector010_tuple_fields", "value": [{"type": "E", "field": "set"}] }, { "name": "selector010_toggle", "value": false, "on": [ { "events": {"merge": [{"source": "view", "type": "click"}]}, "update": "event.shiftKey" } ] }, { "name": "selector010_modify", "on": [ { "events": {"signal": "selector010_tuple"}, "update": "modify(\"selector010_store\", selector010_toggle ? null : selector010_tuple, selector010_toggle ? null : true, selector010_toggle ? selector010_tuple : null)" } ] } ], "marks": [ { "name": "concat_1_concat_1_layer_0_marks", "type": "symbol", "style": ["circle"], "interactive": true, "from": {"data": "data_15"}, "encode": { "update": { "opacity": {"value": 1}, "size": {"value": 650}, "fill": {"scale": "color", "field": "set"}, "x": {"signal": "concat_1_concat_1_width", "mult": 0.5}, "y": { "scale": "concat_1_y", "field": "set_order", "band": 0.5 }, "shape": {"value": "circle"} } } }, { "name": "concat_1_concat_1_layer_1_marks", "type": "text", "style": ["text"], "interactive": false, "from": {"data": "data_16"}, "encode": { "update": { "align": {"value": "center"}, "fill": {"value": "white"}, "opacity": {"value": 1}, "x": {"signal": "concat_1_concat_1_width", "mult": 0.5}, "y": { "scale": "concat_1_y", "field": "set_order", "band": 0.5 }, "text": {"signal": "''+datum[\"set_abbre\"]"}, "baseline": {"value": "middle"} } } } ], "axes": [ { "scale": "concat_1_y", "orient": "left", "grid": false, "domain": false, "labels": false, "ticks": false, "zindex": 0 } ] }, { "type": "group", "name": "concat_1_concat_2_group", "style": "cell", "encode": { "update": { "width": {"signal": "concat_1_concat_2_width"}, "height": {"signal": "concat_1_childHeight"} } }, "signals": [ { "name": "selector010_tuple", "update": "selector010_set_legend !== null ? {fields: selector010_tuple_fields, values: [selector010_set_legend]} : null" }, { "name": "selector010_tuple_fields", "value": [{"type": "E", "field": "set"}] }, { "name": "selector010_toggle", "value": false, "on": [ { "events": {"merge": [{"source": "view", "type": "click"}]}, "update": "event.shiftKey" } ] }, { "name": "selector010_modify", "on": [ { "events": {"signal": "selector010_tuple"}, "update": "modify(\"selector010_store\", selector010_toggle ? null : selector010_tuple, selector010_toggle ? null : true, selector010_toggle ? selector010_tuple : null)" } ] } ], "marks": [ { "name": "concat_1_concat_2_marks", "type": "rect", "style": ["bar"], "interactive": true, "from": {"data": "data_17"}, "encode": { "update": { "fill": {"scale": "color", "field": "set"}, "opacity": {"value": 1}, "x": { "scale": "concat_1_concat_2_x", "field": "sum_count_end" }, "x2": { "scale": "concat_1_concat_2_x", "field": "sum_count_start" }, "yc": { "scale": "concat_1_y", "field": "set_order", "band": 0.5 }, "height": {"value": 16} } } } ], "axes": [ { "scale": "concat_1_concat_2_x", "orient": "bottom", "grid": false, "title": "Set Size", "tickCount": 3, "labelFlush": true, "labelOverlap": true, "zindex": 0 }, { "scale": "concat_1_y", "orient": "left", "grid": false, "domain": false, "labels": false, "ticks": false, "zindex": 0 } ] } ] } ], "scales": [ { "name": "color", "type": "ordinal", "domain": [ "Shortness of Breath", "Diarrhea", "Fever", "Cough", "Anosmia", "Fatigue" ], "range": [ "#55A8DB", "#3070B5", "#30363F", "#F1AD60", "#DF6234", "#BDC6CA" ] }, { "name": "concat_0_x", "type": "band", "domain": { "fields": [ {"data": "data_1", "field": "intersection_id"}, {"data": "data_3", "field": "intersection_id"} ], "sort": {"op": "min", "field": "count"} }, "range": [0, {"signal": "concat_0_width"}], "paddingInner": 0.1, "paddingOuter": 0.05 }, { "name": "concat_0_y", "type": "linear", "domain": { "fields": [ {"data": "data_2", "field": "max_count"}, {"data": "data_4", "field": "max_count"} ] }, "range": [{"signal": "concat_0_height"}, 0], "nice": true, "zero": true }, { "name": "concat_1_y", "type": "band", "domain": { "fields": [ {"data": "data_6", "field": "set_order"}, {"data": "data_8", "field": "set_order"}, {"data": "data_10", "field": "set_order"}, {"data": "data_12", "field": "min_set_order"}, {"data": "data_12", "field": "max_set_order"}, {"data": "data_14", "field": "set_order"}, {"data": "data_15", "field": "set_order"}, {"data": "data_16", "field": "set_order"}, {"data": "data_17", "field": "set_order"} ], "sort": true }, "range": [0, {"signal": "concat_1_childHeight"}], "paddingInner": 0, "paddingOuter": 0 }, { "name": "concat_1_concat_0_x", "type": "band", "domain": { "fields": [ {"data": "data_5", "field": "intersection_id"}, {"data": "data_7", "field": "intersection_id"}, {"data": "data_9", "field": "intersection_id"}, {"data": "data_11", "field": "intersection_id"}, {"data": "data_13", "field": "intersection_id"} ], "sort": {"op": "min", "field": "count"} }, "range": [0, {"signal": "concat_1_concat_0_width"}], "paddingInner": 0, "paddingOuter": 0 }, { "name": "concat_1_concat_2_x", "type": "linear", "domain": { "data": "data_17", "fields": ["sum_count_start", "sum_count_end"] }, "range": [0, {"signal": "concat_1_concat_2_width"}], "nice": true, "zero": true } ], "legends": [ { "fill": "color", "direction": "horizontal", "encode": { "labels": { "name": "set_legend_labels", "interactive": true, "update": { "opacity": [ { "test": "(!length(data(\"selector010_store\")) || (selector010[\"set\"] && indexof(selector010[\"set\"], datum.value) >= 0))", "value": 1 }, {"value": 0.35} ] } }, "symbols": { "name": "set_legend_symbols", "interactive": true, "update": { "opacity": [ { "test": "(!length(data(\"selector010_store\")) || (selector010[\"set\"] && indexof(selector010[\"set\"], datum.value) >= 0))", "value": 1 }, {"value": 0.35} ] } }, "entries": { "name": "set_legend_entries", "interactive": true, "update": {"fill": {"value": "transparent"}} } } } ], "config": { "axis": { "labelFontSize": 14, "labelFontWeight": 300, "titleFontSize": 16, "titleFontWeight": 400, "titlePadding": 10 }, "legend": { "labelFontSize": 14, "labelFontWeight": 300, "orient": "top", "padding": 20, "symbolSize": 325, "symbolType": "circle", "titleFontSize": 16, "titleFontWeight": 400 }, "style": { "cell": {"stroke": null}, "group-title": {"fontSize": 18, "fontWeight": 400} }, "title": {"subtitlePadding": 10} } }